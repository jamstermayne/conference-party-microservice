<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="maps-key" content="__ENV_GOOGLE_MAPS_KEY__" />
  <meta name="google-client-id" content="__ENV_GOOGLE_CLIENT_ID__" />
  <title>Network Pro</title>
  
  <!-- PWA Resource Hints for Party List Performance -->
  <link rel="preconnect" href="https://us-central1-conference-party-app.cloudfunctions.net" crossorigin>
  <link rel="preconnect" href="https://apis.google.com" crossorigin>
  <link rel="dns-prefetch" href="//conference-party-app.web.app">
  
  <!-- Stylesheets will be loaded dynamically as needed -->
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">
  <!-- Jobs/Ive Design System - Complete Transformation -->
  <link rel="stylesheet" href="/assets/css/hero-system.css">
  <link rel="stylesheet" href="/assets/css/unified-system.css">
  <link rel="stylesheet" href="/assets/css/cards-elegant.css">
  <link rel="stylesheet" href="/assets/css/nav-elegant.css">
  <!-- Legacy styles (to be phased out) -->
  <link rel="stylesheet" href="/assets/css/app-unified.css">
  <!-- Unified Floating Button System -->
  <link rel="stylesheet" href="/assets/css/floating-buttons-unified.css">
  
  <!-- Smart Onboarding for Intelligent Matchmaking -->
  <script type="module" src="/assets/js/smart-onboarding.js"></script>
  
  <!-- Initialize Smart Onboarding -->
  <script type="module">
    // Wait for smart onboarding to be ready
    window.addEventListener('DOMContentLoaded', () => {
      console.log('[Init] Smart Onboarding ready');
      // Clear profile for demo (remove this line in production)
      // localStorage.removeItem('smartProfile');
    });
  </script>
</head>
<body>
  <!-- Hero Landing - Immediate Visual Impact -->
  <div id="hero-landing" class="hero-container">
    <div class="hero-bg-animation">
      <div class="hero-gradient-orb"></div>
      <div class="hero-gradient-orb"></div>
    </div>
    
    <header class="hero-header">
      <div class="hero-logo">
        <div class="hero-logo-icon">M</div>
        <span>MAU</span>
      </div>
    </header>
    
    <main class="hero-main">
      <div class="hero-content">
        <h1 class="hero-title">Connect. Discover. Network.</h1>
        <p class="hero-subtitle">Your professional companion for the world's largest gaming conference</p>
        
        <div class="hero-actions">
          <button class="hero-btn hero-btn-primary" onclick="window.startApp()">
            <span>Get Started</span>
            <span>â†’</span>
          </button>
          <button class="hero-btn hero-btn-secondary" onclick="window.startApp()">
            <span>Explore Features</span>
          </button>
        </div>
        
        <div class="hero-features">
          <div class="hero-feature" onclick="window.heroLanding.showFeature('discovery')">
            <div class="hero-feature-icon" data-icon="target"></div>
            <h3 class="hero-feature-title">Smart Discovery</h3>
            <p class="hero-feature-desc">AI-powered event recommendations tailored to your interests</p>
          </div>
          <div class="hero-feature" onclick="window.startApp()">
            <div class="hero-feature-icon" data-icon="handshake"></div>
            <h3 class="hero-feature-title">Professional Network</h3>
            <p class="hero-feature-desc">Connect with industry leaders and innovators</p>
          </div>
          <div class="hero-feature" onclick="window.startApp()">
            <div class="hero-feature-icon" data-icon="wifiOff"></div>
            <h3 class="hero-feature-title">Works Offline</h3>
            <p class="hero-feature-desc">Access everything even without connection</p>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Main App (Hidden Initially) -->
  <main id="app" class="app" style="display: none;">
    <div class="panel-stack">
      <section id="home" class="panel-base">
        <div class="home-panel" id="home-panel">
          <!-- JS populates Parties & Map sections + Channels -->
        </div>
      </section>
      <!-- Overlay panels injected dynamically -->
    </div>
  </main>
  <!-- Icon Gallery - Professional SVG Icons -->
  <script type="module" src="/assets/js/icon-gallery.js"></script>
  <!-- Icon Initializer - Auto-render SVG icons -->
  <script type="module" src="/assets/js/icon-initializer.js"></script>
  <!-- Overlay Cleanup - DISABLED -->
  <!-- <script type="module" src="/assets/js/overlay-cleanup.js"></script> -->
  <!-- Debug Overlay - Diagnostic tool -->
  <script type="module" src="/assets/js/debug-overlay.js"></script>
  <!-- Modal Failsafe - Prevents stuck modals -->
  <script type="module" src="/assets/js/modal-failsafe.js"></script>
  <!-- Hero Landing Controller - Beautiful First Impression -->
  <script type="module" src="/assets/js/hero-landing.js"></script>
  <!-- Micro-FTUE System - DISABLED -->
  <!-- <script type="module" src="/assets/js/micro-ftue.js"></script> -->
  <!-- Haptic Feedback - iOS-like tactile responses -->
  <script type="module" src="/assets/js/haptic-feedback.js"></script>
  <!-- Magic Link Authentication -->
  <script type="module" src="/assets/js/magic-link-auth.js"></script>
  <!-- Demo Reset Button - For testing magic link flow -->
  <script type="module" src="/assets/js/demo-reset-button.js"></script>
  <!-- Real-time Messaging System -->
  <script type="module" src="/assets/js/messaging-system.js"></script>
  <!-- Live Activity Feed -->
  <script type="module" src="/assets/js/activity-feed.js"></script>
  <!-- Feature Showcase - DISABLED -->
  <!-- <script type="module" src="/assets/js/feature-showcase.js"></script> -->
  <!-- Smart Proximity Networking - Location-based matchmaking -->
  <script type="module" src="/assets/js/proximity-networking.js"></script>
  <!-- Security Module - Load First -->
  <script type="module" src="/assets/js/security/sanitizer.js"></script>
  <!-- Feature Flags - Control blast radius -->
  <script src="/assets/js/feature-flags.js"></script>
  <!-- Component Sandbox - Isolate components -->
  <script type="module" src="/assets/js/component-sandbox.js"></script>
  
  <!-- Modern Architecture Integration (Progressive Enhancement) -->
  <script type="module">
    // Only load modern features for capable browsers
    if ('noModule' in HTMLScriptElement.prototype && window.FeatureFlags) {
      // Check if modern architecture is enabled
      if (window.FeatureFlags.isEnabled('modern_architecture')) {
        import('/modern/core/module-loader.js').then(() => {
          console.log('[Modern] Architecture loaded');
        });
        import('/modern/core/compatibility-bridge.js').then(() => {
          console.log('[Modern] Compatibility bridge established');
        });
      }
      
      // Load magic auth system if enabled
      if (window.FeatureFlags.isEnabled('magic_auth')) {
        // Load all magic auth modules
        Promise.all([
          import('/modern/auth/magic-auth.js'),
          import('/modern/components/magic-auth-ui.js'),
          import('/modern/services/company-intelligence.js'),
          import('/modern/services/profile-enrichment.js'),
          import('/modern/auth/auth-integration.js')
        ]).then(([magicAuthModule]) => {
          window.MagicAuth = new magicAuthModule.MagicAuthSystem();
          console.log('[MagicAuth] Full system initialized with enrichment');
        }).catch(err => {
          console.error('[MagicAuth] Failed to load:', err);
        });
      }
    }
  </script>
  
  <!-- PWA Install Prompt -->
  <script type="module" src="/assets/js/pwa-install-prompt.js"></script>
  <!-- Core API Module -->
  <script type="module" defer src="/assets/js/api-lite.js"></script>
  <!-- Collapsible Sidebar Controller -->
  <script type="module" src="/assets/js/sidebar-controller.js"></script>
  <!-- Overlay Panel System - DISABLED DUE TO BLOCKING ISSUES -->
  <!-- <script type="module" src="/assets/js/overlay-live.js"></script> -->
  <!-- Router for preflight -->
  <script type="module" src="/assets/js/router-2panel-lite.js?v=2025"></script>
  <!-- Demo App Content -->
  <script type="module" src="/assets/js/app-demo.js"></script>
  <!-- Unified Conference App - Production Ready -->
  <script type="module" defer src="/assets/js/app-unified.js"></script>
</body>
</html>