<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- PWA Meta -->
  <meta name="theme-color" content="#6b7bff" />
  <meta name="mobile-web-app-capable" content="yes" />
  <link rel="manifest" href="/manifest.json?v=7" />

  <!-- Content Security Policy (allows Cloud Functions + Google/LinkedIn SDKs) -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' 'unsafe-inline' https://accounts.google.com https://*.googleapis.com https://*.gstatic.com https://platform.linkedin.com; connect-src 'self' https://us-central1-conference-party-app.cloudfunctions.net https://*.googleapis.com https://*.gstatic.com https://api.linkedin.com; img-src 'self' data: https://*.gstatic.com https://*.googleusercontent.com https://media.licdn.com; style-src 'self' 'unsafe-inline'; font-src 'self' data:; frame-src https://accounts.google.com https://www.linkedin.com; worker-src 'self'; base-uri 'self'; form-action 'self' https://www.linkedin.com;" />


  <title>velocity.ai — Gamescom 2025</title>
  <meta name="application-name" content="velocity.ai — Gamescom 2025">
  <meta name="description" content="velocity.ai — your private conference social network.">

  <!-- Favicon & Icons -->
  <link rel="icon" type="image/svg+xml" href="/assets/icons/velocity-logo.svg">
  <link rel="apple-touch-icon" href="/assets/icons/icon-192.png">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Social: Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="velocity.ai — Gamescom 2025">
  <meta property="og:description" content="Join private conference parties and sync your calendar.">
  <meta property="og:image" content="/social/share-default.png">
  <meta property="og:url" content="https://conference-party-app.web.app">

  <!-- Social: Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="velocity.ai — Gamescom 2025">
  <meta name="twitter:description" content="Join private conference parties and sync your calendar.">
  <meta name="twitter:image" content="/social/share-default.png">

  <!-- SEO -->
  <link rel="canonical" href="https://conference-party-app.web.app">
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Event",
    "name": "Tech Leaders Networking Party",
    "startDate": "2025-08-19T19:00:00+01:00",
    "endDate": "2025-08-19T23:00:00+01:00",
    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
    "eventStatus": "https://schema.org/EventScheduled",
    "location": {
      "@type": "Place",
      "name": "Rooftop Bar",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "123 Conference Ave",
        "addressLocality": "Cologne",
        "addressCountry": "DE"
      }
    },
    "image": [
      "https://conference-party-app.web.app/social/event-tech-leaders.png"
    ],
    "description": "Join industry leaders for an exclusive networking party during Gamescom.",
    "organizer": {
      "@type": "Organization",
      "name": "Velocity",
      "url": "https://conference-party-app.web.app"
    }
  }
  </script>
  
  <!-- Metrics boot -->
  <script>
    // Safe Metrics boot
    try { window.Metrics?.track?.('app_boot', { inline: true }); } catch(e) {}
  </script>
  
  <link rel="stylesheet" href="assets/css/styles.css"/>
  <link rel="stylesheet" href="/assets/css/app-shell.css?v=13">
  <link rel="stylesheet" href="/assets/css/header-actions.css?v=14">
  <link rel="stylesheet" href="/assets/css/nav.css">
  <link rel="stylesheet" href="/assets/css/hotspots.css">
  <link rel="stylesheet" href="/css/hotspots.css?v=10">
  <link rel="stylesheet" href="/css/calendar.css?v=11">
  <link rel="stylesheet" href="/css/ftue-nudge.css?v=11">
  <link rel="stylesheet" href="/css/panels.css?v=7">
  <link rel="stylesheet" href="/css/layout-polish.css?v=10">
  <link rel="stylesheet" href="/css/cards-parties.css?v=7">
  <link rel="stylesheet" href="/css/calendar-strip.css?v=8">
  <link rel="stylesheet" href="/css/toast.css?v=8">
  <link rel="stylesheet" href="/css/invite-panel.css?v=9">
  <link rel="stylesheet" href="/css/layout.css?v=10">
  <link rel="stylesheet" href="/css/app.css?v=11">
  <link rel="stylesheet" href="/css/sidebar.css?v=12">
  <link rel="stylesheet" href="/css/sections.css?v=12">
  <link rel="stylesheet" href="/css/loading.css?v=15">
  <link rel="stylesheet" href="/css/events-cards.css?v=10">
  <link rel="stylesheet" href="/css/cards.css?v=1">
  <link rel="stylesheet" href="/css/account.css?v=11">
  <link rel="stylesheet" href="/css/sidebar-fix.css?v=18">
  <link rel="stylesheet" href="/css/sidebar-polish.css?v=9">
  <link rel="stylesheet" href="/assets/css/party-cards.css?v=1">
  <link rel="stylesheet" href="/css/events.css?v=8">
</head>
<body>
  <aside id="sidenav" class="sidenav">
    <!-- brand -->
    <div class="brand">
      <span class="logo-glyph">V</span>
      <div class="brand-text">
        <div class="brand-name">velocity.ai</div>
        <div class="brand-sub">gamescom 2025</div>
      </div>
    </div>

    <!-- channels -->
    <nav class="side-nav">
      <button class="nav-item active" data-route="parties"><span class="hash">#</span><span class="label">parties</span></button>
      <button class="nav-item" data-route="hotspots"><span class="hash">#</span><span class="label">hotspots</span></button>
      <button class="nav-item" data-route="map"><span class="hash">#</span><span class="label">map</span></button>
      <button class="nav-item" data-route="calendar"><span class="hash">#</span><span class="label">calendar</span></button>
      <button class="nav-item" data-route="invites"><span class="hash">#</span><span class="label">invites</span></button>
      <button class="nav-item" data-route="me"><span class="hash">#</span><span class="label">me</span></button>
      <button class="nav-item" data-route="settings"><span class="hash">#</span><span class="label">settings</span></button>
    </nav>
  </aside>

  <section class="content">
    <header class="topbar">
      <button id="nav-toggle" aria-label="Navigation" class="icon-btn">≡</button>
      <h1 id="page-title" class="page-title">Parties</h1>
      <span id="route-chip" class="chip">#parties</span>
    </header>

    <!-- main content area -->
    <main id="main" class="main">
      <div class="page-head">
        <div class="route-label">
          <h1 data-role="route-title" class="route-title">#parties</h1>
          <span data-role="route-subtitle" class="route-subtitle">Pick parties and save to your calendar</span>
        </div>
      </div>

      <section id="route-parties"></section>
      <section id="route-hotspots" hidden></section>
      <section id="route-map" hidden></section>
      <section id="route-calendar" hidden></section>
      <section id="route-invites" hidden></section>
      <section id="route-account" hidden></section>
    </main>
  </section>
  <!-- ENV must come first -->
  <script src="/js/env.js?v=6"></script>

  <!-- Foundation (module) -->
  <script type="module" src="/assets/js/foundation/app-bootstrap.js?v=6"></script>
  <script type="module" src="/assets/js/foundation/sw-register.js?v=6"></script>

  <!-- Metrics: shim ONLY (no ESM metrics module right now) -->
  <script nomodule src="/js/metrics-shim.js?v=6"></script>

  <!-- Core modules -->
  <script type="module" src="/js/store.js?v=6"></script>
  <script type="module" src="/js/events.js?v=6"></script>
  <script type="module" src="/js/me-controller.js?v=14"></script>
  <script type="module" src="/js/ui-feedback.js?v=6"></script>
  <script type="module" src="/js/install.js?v=6"></script>
  <script type="module" src="/js/auth.js?v=6"></script>
  <script type="module" src="/js/router.js?v=7"></script>

  <!-- Feature controllers -->
  <script type="module" src="/js/invite.js?v=6"></script>
  <script type="module" src="/js/invite-panel.js?v=6"></script>
  <script type="module" src="/js/invite-badge-sync.js?v=6"></script>
  <script type="module" src="/js/calendar-integration.js?v=6"></script>
  <script type="module" src="/js/events-controller.js?v=10"></script>
  
  <!-- Selection and sync modules -->
  <script type="module" src="/js/selection-store.js?v=1"></script>
  <script type="module" src="/js/calendar-sync.js?v=1"></script>
  <script type="module" src="/js/account-controller.js?v=1"></script>
  <script type="module" src="/js/account.js?v=12"></script>
  <script type="module" src="/js/calendar-view.js?v=11"></script>
  <script type="module" src="/js/account-hub.js?v=11"></script>
  <script type="module" src="/js/ftue-addressbook-prompt.js?v=11"></script>

  <!-- Keep optional modules MODULED (prevents "import outside module") -->
  <script type="module" src="/js/ftue-progress.js?v=6"></script>
  <script type="module" src="/js/router-route-metrics.js?v=6"></script>

  <!-- TEMP: comment out if your file isn't ready; or keep with fixed file below -->
  <script type="module" src="/js/activity-feed.js?v=6"></script>

  <!-- Route controllers -->
  <script type="module" src="/js/route-title.js?v=10"></script>
  <script type="module" src="/js/hotspots-controller.js?v=10"></script>
  
  <!-- Panel enhancements -->
  <script type="module" src="/js/hotspots.js?v=7"></script>
  <script type="module" src="/js/map.js?v=7"></script>
  <script type="module" src="/js/parties-polish.js?v=7"></script>

  <!-- Layout polish -->
  <script type="module" src="/js/route-title.js?v=7"></script>
  <script type="module" src="/js/layout-snap.js?v=7"></script>

  <!-- Drop H enhancements -->
  <script type="module" src="/js/hotspots-polish.js?v=8"></script>
  <script type="module" src="/js/calendar-strip.js?v=8"></script>
  <script type="module" src="/js/toast.js?v=8"></script>

  <!-- Drop I - Invite growth loop -->
  <script type="module" src="/js/invite-growth-loop.js?v=9"></script>

  <!-- Drop J - Nav and layout fixes -->
  <script type="module" src="/js/nav.js?v=10"></script>

  <!-- Accent Rail System -->
  <script type="module" src="/js/rail-autowrap.js?v=11"></script>
  <script type="module" src="/js/rail-sync.js?v=11"></script>

  <!-- Final wire-up -->
  <script type="module" src="/js/app-wireup.js?v=7"></script>
  
  <!-- PWA Install Handler -->
  <script type="module">
    // Handle PWA install prompt
    let deferredPrompt;
    
    window.addEventListener('beforeinstallprompt', (e) => {
      // Prevent the mini-infobar from appearing on mobile
      e.preventDefault();
      // Stash the event so it can be triggered later
      deferredPrompt = e;
      // Update UI to show install button
      const installBtn = document.getElementById('btn-install');
      if (installBtn) {
        installBtn.style.display = 'block';
      }
    });
    
    // Handle install button click
    document.getElementById('btn-install')?.addEventListener('click', async () => {
      if (deferredPrompt) {
        // Show the install prompt
        deferredPrompt.prompt();
        // Wait for the user to respond to the prompt
        const { outcome } = await deferredPrompt.userChoice;
        console.log(`User response to the install prompt: ${outcome}`);
        // Clear the deferred prompt
        deferredPrompt = null;
        // Hide the install button
        document.getElementById('btn-install').style.display = 'none';
      }
    });
    
    // Check if already installed
    window.addEventListener('appinstalled', () => {
      console.log('PWA was installed');
      const btnInstall = document.getElementById('btn-install');
      if (btnInstall) btnInstall.style.display = 'none';
    });
  </script>
  
  <!-- Safe bootstrap (ensures clean route initialization) -->
  <script type="module">
    import Router from '/js/router.js';
    // Ensure default route
    if (!location.hash) location.hash = '#/parties';
    // Light route metric hook (won't throw if not wired)
    window.addEventListener('hashchange', () => {
      try { window.Metrics?.trackRoute?.(location.hash || '#/parties'); } catch {}
    });
  </script>


</body>
</html>