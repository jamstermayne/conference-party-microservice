<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Primary Meta -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#6b7bff">
  <meta name="color-scheme" content="dark">
  <meta name="description" content="Velocity ‚Äî your private conference social network.">
  <title>Velocity ‚Äî Gamescom 2025</title>

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon" href="/assets/icons/icon-192.png">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Social: Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Velocity">
  <meta property="og:description" content="Join private conference parties and sync your calendar.">
  <meta property="og:image" content="/social/share-default.png">
  <meta property="og:url" content="https://conference-party-app.web.app">

  <!-- Social: Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Velocity">
  <meta name="twitter:description" content="Join private conference parties and sync your calendar.">
  <meta name="twitter:image" content="/social/share-default.png">

  <!-- SEO -->
  <link rel="canonical" href="https://conference-party-app.web.app">
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Event",
    "name": "Tech Leaders Networking Party",
    "startDate": "2025-08-19T19:00:00+01:00",
    "endDate": "2025-08-19T23:00:00+01:00",
    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
    "eventStatus": "https://schema.org/EventScheduled",
    "location": {
      "@type": "Place",
      "name": "Rooftop Bar",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "123 Conference Ave",
        "addressLocality": "Cologne",
        "addressCountry": "DE"
      }
    },
    "image": [
      "https://conference-party-app.web.app/social/event-tech-leaders.png"
    ],
    "description": "Join industry leaders for an exclusive networking party during Gamescom.",
    "organizer": {
      "@type": "Organization",
      "name": "Velocity",
      "url": "https://conference-party-app.web.app"
    }
  }
  </script>
  
  <!-- Design System CSS -->
  <link rel="stylesheet" href="/assets/design/tokens.css">
  <link rel="stylesheet" href="/assets/design/motion.css">
  <link rel="stylesheet" href="/assets/design/compat.css">
  
  <!-- Component CSS -->
  <link rel="stylesheet" href="/assets/css/event-cards.css">
  <link rel="stylesheet" href="/assets/css/calendar.css">
  <link rel="stylesheet" href="/assets/css/install.css">
  <link rel="stylesheet" href="/assets/css/nav.css">
  <link rel="stylesheet" href="/assets/css/toast.css">
  
  <!-- Legacy styles (if needed) -->
  <link rel="stylesheet" href="assets/css/styles.css"/>
</head>
<body>
  <!-- Skip link for accessibility -->
  <a href="#main-content" class="skip-link">Skip to main content</a>
  
  <div id="app" class="app">
    <!-- Slack-style Sidebar -->
    <aside id="sidenav" class="sidenav" aria-label="Main navigation">
      <div class="side-head">
        <div class="brand">Velocity</div>
        <div class="workspace">Gamescom 2025</div>
      </div>
      <nav class="side-nav">
        <button class="nav-item active" data-route="parties">üóìÔ∏è Parties</button>
        <button class="nav-item" data-route="hotspots">üî• Hotspots</button>
        <button class="nav-item" data-route="opportunities">üéØ Opportunities</button>
        <button class="nav-item" data-route="calendar">üìÖ Calendar</button>
        <button class="nav-item" data-route="invites">
          üéü Invites
          <span id="invites-badge" class="side-badge" aria-live="polite" aria-atomic="true">‚Äî</span>
        </button>
        <button class="nav-item" data-route="me">üë§ Me</button>
        <button class="nav-item" data-route="settings">‚öôÔ∏è Settings</button>
      </nav>
      <div class="side-footer">
        <div class="auth-section" id="auth-section">
          <!-- Authentication buttons (shown when not logged in) -->
          <div class="auth-buttons" id="auth-buttons">
            <button id="btn-google" class="btn btn-small auth-btn">
              üìß Sign in with Google
            </button>
            <button id="btn-linkedin" class="btn btn-small auth-btn">
              üíº Sign in with LinkedIn
            </button>
          </div>
          <!-- User profile (shown when logged in) -->
          <div class="user-profile hidden" id="user-profile">
            <div class="user-info">
              <img id="user-avatar" class="user-avatar" alt="User avatar" />
              <div class="user-details">
                <div id="user-name" class="user-name"></div>
                <small id="user-email" class="user-email muted"></small>
              </div>
            </div>
            <button id="btn-signout" class="btn btn-small btn-ghost">Sign Out</button>
          </div>
        </div>
        <small class="muted">Exclusive ‚Ä¢ Privacy-first</small>
      </div>
    </aside>
    <!-- Overlay (mobile) -->
    <div id="overlay" class="overlay" hidden></div>
    <!-- Main Panel -->
    <main id="main-content">
      <header class="topbar">
        <button id="menu" class="icon-btn" aria-label="Open menu">‚ò∞</button>
        <h1 id="page-title">Parties</h1>
      </header>
      <!-- Routes mount here -->
      <section id="route" role="region" aria-live="polite"></section>
      <!-- Events list for production controller -->
      <section id="event-list" role="region" aria-label="Gaming industry parties"></section>
      
      <!-- Calendar Panel -->
      <section data-route="calendar" id="panel-calendar" class="route-panel" aria-label="Calendar">
        <header class="panel-header flex flex-row flex-wrap">
          <h1 class="text-heading">Calendar</h1>
          <div class="flex-1"></div>
          <div id="cal-status" class="stack-2 text-secondary" aria-live="polite" aria-atomic="true"></div>
        </header>

        <!-- Connect row -->
        <div class="card card-outlined card-compact stack-2" id="cal-connect">
          <div class="flex flex-wrap stack-2">
            <button class="btn btn-primary"   data-action="cal-google">Connect Google</button>
            <button class="btn btn-secondary" data-action="cal-ics">Add ICS</button>
            <button class="btn btn-ghost"     data-action="cal-m2m">Enable Meet-to-Match</button>
          </div>
          <div class="text-caption text-muted">We only use event titles/time/venue during Gamescom. Privacy-first.</div>
        </div>

        <!-- Week strip -->
        <div id="cal-week" class="cal-week"></div>

        <!-- Agenda -->
        <div id="cal-skeleton" class="stack-3" aria-hidden="true">
          <div class="card card-glass card-compact skeleton"></div>
          <div class="card card-glass card-compact skeleton"></div>
        </div>
        <div id="cal-agenda" class="stack-3" data-test="calendar-agenda"></div>

        <!-- Empty -->
        <template id="tpl-cal-empty">
          <div class="card card-outlined card-compact text-secondary">No meetings found for this window.</div>
        </template>
      </section>
      
      <!-- Enhanced Install Card with Accessibility -->
      <div id="install-card" class="install-card hidden" role="dialog" aria-labelledby="install-title" aria-describedby="install-desc">
        <div class="install-content" tabindex="-1">
          <img src="/assets/icons/icon-192.png" alt="Velocity App Icon" class="install-icon" />
          <h3 id="install-title">Install Velocity</h3>
          <p id="install-desc">Add Velocity for instant access to parties & invites.</p>
          <div class="row gap">
            <button id="install-btn" class="btn btn-primary" aria-label="Install Velocity App">Install</button>
            <button id="install-dismiss" class="btn btn-secondary" aria-label="Dismiss install prompt">Not Now</button>
          </div>
        </div>
      </div>
      <!-- iOS Install Hint -->
      <div id="install-ios-hint" class="install-ios-hint">Share ‚Üí Add to Home Screen</div>
      <!-- Toasts -->
      <template id="tpl-toast"><div class="toast"><span class="msg"></span></div></template>
      <!-- SR-only Live -->
      <div id="aria-live-status" class="sr-only" aria-live="polite" aria-atomic="true"></div>
    </main>
  </div>
  
  <!-- Runtime configuration (no bundler) -->
  <script>
    window.__ENV = Object.assign({
      GOOGLE_CLIENT_ID: "",           // e.g. "123.apps.googleusercontent.com"
      LINKEDIN_CLIENT_ID: "",         // e.g. "86xxxx"
      OAUTH_REDIRECT_URL: location.origin + "/auth/callback",
      BASE_URL: location.origin
    }, window.__ENV || {});
  </script>
  
  <!-- Foundation spine -->
  <script type="module" src="/assets/js/foundation/app-bootstrap.js"></script>
  <script type="module" src="/assets/js/foundation/sw-register.js"></script>
  <script type="module" src="/assets/js/foundation/instrumentation.js"></script>

  <!-- Skin + global UX -->
  <script type="module" src="/assets/design/skin.js"></script>
  <script type="module" src="/assets/js/toast.js"></script>
  <script type="module" src="/assets/js/a11y.js"></script>

  <!-- Core features -->
  <script type="module" src="/assets/js/nav.js"></script>
  <script type="module" src="/assets/js/foundation/metrics.js"></script>
  <script type="module" src="/assets/js/pwa-install.js"></script>
  <script type="module" src="/assets/js/invite-deeplink.js"></script>
  <script type="module" src="/assets/js/auth.js"></script>

  <!-- FTUE/Events + Calendar (UI only; no controller edits) -->
  <script type="module" src="/assets/js/ui/eventCard.js"></script>
  <script type="module" src="/assets/js/events-controller.js"></script>
  <script type="module" src="/assets/js/calendar-view.js"></script>
  <script type="module" src="/assets/js/invite-badge.js"></script>
  <script type="module" src="/assets/js/invite-deeplink.js"></script>
</body>
</html>