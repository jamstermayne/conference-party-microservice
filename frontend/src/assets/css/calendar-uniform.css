/* ---- Calendar Layout (collision-proof, sidebar-agnostic) ---- */
:root{
  --hour-height: 240;                 /* 60m vertical height */
  --cal-baseline-hour: 8;               /* 08:00 start */
  --cal-end-hour: 22;                   /* 22:00 end */
  --cal-gutter: var(--s-13);                   /* left time gutter width */
  --cal-pad: var(--s-4);                      /* right padding */
  --cal-grid-line: rgba(255,255,255,.06);
  --cal-muted: var(--text-muted);
}

/* Page container inside #main */
.calendar-screen{
  padding: var(--s-2) 0 var(--s-12);
}

/* Sticky toolbar */
.cal-toolbar{
  position: sticky; top: 0; z-index: 5;
  padding: var(--s-2-5) var(--s-3) var(--s-3);
  background: linear-gradient(180deg, rgba(13,18,29,.85), rgba(13,18,29,0));
  backdrop-filter: blur(var(--s-1-5));
  display: flex; gap: var(--s-2); align-items: center;
}

/* Grid host */
.cal-grid{
  position: relative;
  margin: var(--s-2) 0 var(--s-6);
  min-height: calc((var(--cal-end-hour) - var(--cal-baseline-hour)) * var(--hour-height));
  border-left: var(--bw-1) solid var(--cal-grid-line);
}

/* Hour rows + labels */
.cal-grid .hour-row{
  height: var(--hour-height);
  border-bottom: var(--bw-1) dashed var(--cal-grid-line);
  position: relative;
}
.cal-grid .hour-row .label{
  position: absolute;
  left: 0; top: -8px; width: var(--cal-gutter);
  text-align: right; padding-right: var(--s-2-5);
  font-size: var(--s-3); color: var(--cal-muted);
}

/* Events layer (occupies space right of gutter) */
.cal-events{
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
}

/* Individual event block, positioned absolutely. We place using JS. */
.cal-event{
  position: absolute;
  /* left, top, height, width set inline */
}

/* Make our cards fill the block nicely */
.cal-event .vcard{
  height: 100%;
  display: flex; flex-direction: column; justify-content: center;
  padding: var(--s-3-5);
}

/* Now line */
.cal-now{
  position: absolute;
  left: var(--cal-gutter); right: var(--cal-pad);
  border-top: var(--s-0-5) solid var(--alias-8c7aff);
  filter: drop-shadow(0 0 var(--s-1-5) rgba(140,122,255,.5));
}
.cal-now .tick{
  position: absolute; left: 0; transform: translate(-120%, -50%);
  font-size: 1var(--bw-1); color: var(--alias-cfe0ff); background: rgba(17,25,40,.7);
  border: var(--bw-1) solid rgba(108,91,255,.4); border-radius: var(--r-pill); padding: var(--s-0-5) var(--s-1-5);
}

/* Buttons (re-use vbtn palette) */
.cal-toolbar .vbtn{ padding: var(--s-2) var(--s-3); border-radius: var(--s-3); }

/* provider-grid */
.provider-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280,1fr));
  gap: var(--s-4);
  margin-top: var(--s-4);
}
.provider-card {
  background: var(--panel, rgba(255,255,255,.02));
  border: var(--bw-1) solid var(--panel-border, rgba(255,255,255,.06));
  border-radius: var(--s-4);
  padding: var(--s-4);
}
.provider-card .title { display:flex; align-items:center; gap:1var(--s-0-5); font-weight:600; }
.provider-card .subtitle { opacity:.7; margin:var(--s-1-5) 0 var(--s-3); }
.provider-card .actions { display:flex; flex-wrap:wrap; gap:var(--s-2); }
.provider-card.connected { outline:var(--bw-1) solid var(--accent, var(--alias-7c6cff)); }

/* provider-grid */
.provider-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280,1fr));
  gap: var(--s-4);
  margin-top: var(--s-4);
}
.provider-card {
  background: var(--panel, rgba(255,255,255,.02));
  border: var(--bw-1) solid var(--panel-border, rgba(255,255,255,.06));
  border-radius: var(--s-4);
  padding: var(--s-4);
}
.provider-card .title { display:flex; align-items:center; gap:1var(--s-0-5); font-weight:600; }
.provider-card .subtitle { opacity:.7; margin:var(--s-1-5) 0 var(--s-3); }
.provider-card .actions { display:flex; flex-wrap:wrap; gap:var(--s-2); }
.provider-card.connected { outline:var(--bw-1) solid var(--accent, var(--alias-7c6cff)); }
