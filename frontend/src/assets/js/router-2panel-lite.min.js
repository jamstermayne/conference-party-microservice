!function(e){"use strict";const n={},a={};let t=null;const s=(e,n=document)=>n.querySelector(e);async function i(e){if(a[e]&&Date.now()-a[e].time<3e5)return a[e].data;try{const n=await fetch(e,{mode:"cors"});if(!n.ok)throw new Error(`HTTP ${n.status}`);const t=await n.json();return a[e]={data:t,time:Date.now()},t}catch(n){return console.warn("fetchJSON:",n),a[e]?.data||null}}function o(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function c(e){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()]}function r(e,n){const a=[],t=new Date(e);for(;t<=n;)a.push({date:o(t),label:c(t)+" "+t.getDate()}),t.setDate(t.getDate()+1);return a}function l(e,n){if(s(".panel-scrim"))s(".panel-scrim").classList.add("is-open");else{const e=document.createElement("div");e.className="panel-scrim",document.body.appendChild(e),setTimeout(()=>e.classList.add("is-open"),10),e.addEventListener("click",()=>{d()})}const a=document.createElement("div");a.className="panel",a.innerHTML=`\n      <div class="panel__header">\n        <button class="panel__back">‚Üê Back</button>\n        <h1>${e}</h1>\n      </div>\n      <div class="panel__body">${n}</div>\n    `,document.body.appendChild(a),requestAnimationFrame(()=>{a.classList.add("panel--active")}),s(".panel__back",a).addEventListener("click",d)}function d(){const n=s(".panel.panel--active"),a=s(".panel-scrim");n&&(n.classList.remove("panel--active"),setTimeout(()=>n.remove(),300)),a&&a.classList.remove("is-open"),e.location.hash="#/home"}async function p(e){l(`Map - ${e}`,'\n      <div id="map-container" style="width:100%;height:400px;background:#1a1a1a;border-radius:12px;display:flex;align-items:center;justify-content:center;">\n        <span style="color:#666;">Loading map...</span>\n      </div>\n      <div id="map-events"></div>\n    ');const a=await i("https://us-central1-conference-party-app.cloudfunctions.net/api/parties"),t=(a?.parties||[]).map(e=>`\n      <div class="vcard">\n        <h4>${e.party_name||"Event"}</h4>\n        <p>${e.venue||""}</p>\n      </div>\n    `).join(""),o=s("#map-events");o&&(o.innerHTML=t),async function(){const e=s("#map-container");if(!e)return;try{const a=new((await u()).Map)(e,{center:{lat:50.9578,lng:6.8281},zoom:12,mapTypeId:"roadmap"});n.map=a}catch(n){console.warn("Map init failed:",n),e.innerHTML='<span style="color:#666;">Map unavailable</span>'}}()}function u(){return t||(t=new Promise(n=>{if(e.google?.maps)return void n(e.google.maps);e.initGoogleMapsCallback=()=>{n(e.google.maps),delete e.initGoogleMapsCallback};const a=document.createElement("script");a.src=`https://maps.googleapis.com/maps/api/js?key=${e.ENV_GOOGLE_MAPS_API_KEY||""}&callback=initGoogleMapsCallback&libraries=marker`,a.async=!0,a.defer=!0,document.head.appendChild(a)}),t)}const v={invites:()=>l("Invites",'<div class="vcard">Track your referral invites and earn rewards.</div>'),calendar:()=>l("Calendar",'<div class="vcard">Sync your schedule with conference events.</div>'),proximity:()=>l("Proximity",'<div class="vcard">Discover professionals near your current location.</div>'),opportunities:()=>l("Opportunities",'<div class="vcard">Find career and business opportunities.</div>'),hotspots:async()=>{const e=await i("https://us-central1-conference-party-app.cloudfunctions.net/api/hotspots");l("Hotspots",(e?.venues||[]).map(e=>`\n        <div class="vcard">\n          <h4>${e.name}</h4>\n          <p>Crowd: ${e.crowd_count||0} professionals</p>\n        </div>\n      `).join("")||"<p>No venue data</p>")},intel:()=>l("Intel",'<div class="vcard">Professional intelligence and insights for Gamescom 2025.</div>')};function m(){const n=e.location.hash||"#/home",[,a,t]=n.split("/");if("home"===a||!a){const e=s(".panel.panel--active");e&&(e.classList.remove("panel--active"),setTimeout(()=>e.remove(),300));const n=s(".panel-scrim");n&&n.classList.remove("is-open");const a=s("#app");return void(a&&(a.innerHTML=function(){const e=r(new Date(2025,7,18),new Date(2025,7,23)),n=r(new Date(2025,7,18),new Date(2025,7,23));return`\n      <div class="home-panel" id="home-panel">\n        <div class="home-section">\n          <h2>üéâ Parties</h2>\n          <div class="day-pills">${e.map(({date:e,label:n})=>`<a href="#/parties/${e}" class="day-pill" data-route="#/parties/${e}">${n}</a>`).join("")}</div>\n        </div>\n        <div class="home-section">\n          <h2>üó∫Ô∏è Map</h2>\n          <div class="day-pills">${n.map(({date:e,label:n})=>`<a href="#/map/${e}" class="day-pill" data-route="#/map/${e}">${n}</a>`).join("")}</div>\n        </div>\n        <div class="home-section">\n          <h2>‚ö° Channels</h2>\n          <div class="channels-grid">${[{route:"#/invites",label:"Invites",desc:"Manage referrals"},{route:"#/calendar",label:"Calendar",desc:"Schedule sync"},{route:"#/proximity",label:"Proximity",desc:"Nearby professionals"},{route:"#/opportunities",label:"Opportunities",desc:"Career matching"},{route:"#/hotspots",label:"Hotspots",desc:"Venue heat map"},{route:"#/intel",label:"Intel",desc:"Professional insights"}].map(e=>`<a href="${e.route}" class="channel-btn" data-route="${e.route}">\n        <strong>${e.label}</strong><br>\n        <small>${e.desc}</small>\n      </a>`).join("")}</div>\n        </div>\n      </div>\n    `}()))}"parties"===a&&t?async function(e){const n=await i("https://us-central1-conference-party-app.cloudfunctions.net/api/parties");l(`Parties - ${e}`,(n?.parties||[]).map(e=>`\n      <div class="vcard">\n        <h3>${e.party_name||"Event"}</h3>\n        <p>${e.date||""} ‚Ä¢ ${e.time||""}</p>\n        <p>${e.venue||""}</p>\n        ${e.description?`<p>${e.description}</p>`:""}\n      </div>\n    `).join("")||"<p>No events found</p>")}(t):"map"===a&&t?p(t):v[a]&&v[a]()}document.addEventListener("click",n=>{const a=n.target.closest("a[data-route]");if(a){n.preventDefault();const t=a.dataset.route;e.location.hash=t}}),e.addEventListener("hashchange",m),e.addEventListener("DOMContentLoaded",()=>{if(!s("#app")){const e=document.createElement("div");e.id="app",document.body.appendChild(e)}m()}),e.Router2Panel={Store:n,navigate:m,loadGoogleMaps:u}}(window);