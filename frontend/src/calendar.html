<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendar Sync - Gamescom 2025 Party Discovery</title>
    <meta name="theme-color" content="#4A154B">
    <meta name="description" content="Sync Gamescom 2025 gaming events to your calendar. Never miss an industry party, networking event, or community gathering.">
    <link rel="manifest" href="/manifest.json">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>
<body>
    <div id="app">
        <!-- Navigation -->
        <nav class="main-nav">
            <div class="nav-container">
                <div class="nav-brand">
                    <h1>üéÆ Gamescom Party Discovery</h1>
                    <span class="nav-subtitle">Calendar Sync & Exports</span>
                </div>
                <div class="nav-actions">
                    <button id="themeToggle" class="nav-button">
                        üåô Dark Mode
                    </button>
                    <div class="nav-links">
                        <a href="/" class="nav-link">üîç Search</a>
                        <a href="/maps.html" class="nav-link">üó∫Ô∏è Maps</a>
                        <a href="/calendar.html" class="nav-link active">üìÖ Calendar</a>
                        <a href="/referral.html" class="nav-link">üéâ Invite</a>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Hero Section -->
        <header class="hero-section">
            <div class="hero-content">
                <div class="hero-text">
                    <h2>Never Miss an Event</h2>
                    <p>Sync Gamescom 2025 events to your calendar. Get reminders, plan your week, and export custom schedules for your team.</p>
                    <div class="hero-stats">
                        <div class="stat">
                            <span class="stat-number" id="totalCalendarEvents">58+</span>
                            <span class="stat-label">Events Available</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number" id="syncedEvents">0</span>
                            <span class="stat-label">In Your Calendar</span>
                        </div>
                        <div class="stat">
                            <span class="stat-number">Live</span>
                            <span class="stat-label">Sync</span>
                        </div>
                    </div>
                </div>
                <div class="hero-cta">
                    <button id="bulkExportBtn" class="btn-primary btn-large">
                        üì• Bulk Export All
                    </button>
                    <p class="cta-subtitle">iCal, Google, Outlook compatible</p>
                </div>
            </div>
        </header>

        <!-- Quick Actions -->
        <section class="quick-calendar-actions">
            <div class="actions-container">
                <div class="action-card" onclick="calendarApp.exportToGoogleCalendar()">
                    <div class="action-icon">üìÖ</div>
                    <h3>Google Calendar</h3>
                    <p>One-click sync to Google Calendar</p>
                </div>
                <div class="action-card" onclick="calendarApp.exportToOutlook()">
                    <div class="action-icon">üíº</div>
                    <h3>Outlook</h3>
                    <p>Export for Microsoft Outlook</p>
                </div>
                <div class="action-card" onclick="calendarApp.downloadICS()">
                    <div class="action-icon">üì±</div>
                    <h3>iCal/Apple</h3>
                    <p>Download .ics file for iPhone/Mac</p>
                </div>
                <div class="action-card" onclick="calendarApp.customExport()">
                    <div class="action-icon">‚öôÔ∏è</div>
                    <h3>Custom Export</h3>
                    <p>Select specific events to export</p>
                </div>
            </div>
        </section>

        <!-- Calendar View & Filters -->
        <section class="calendar-section">
            <div class="calendar-container">
                <div class="calendar-controls">
                    <div class="calendar-filters">
                        <div class="filter-group">
                            <label class="filter-label">View:</label>
                            <div class="view-toggles">
                                <button id="listView" class="view-toggle active">üìã List</button>
                                <button id="calendarView" class="view-toggle">üóìÔ∏è Calendar</button>
                                <button id="timelineView" class="view-toggle">‚è±Ô∏è Timeline</button>
                            </div>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">Category:</label>
                            <select id="calendarCategoryFilter" class="calendar-select">
                                <option value="all">All Categories</option>
                                <option value="networking">Networking</option>
                                <option value="afterparty">Afterparty</option>
                                <option value="mixer">Mixer</option>
                                <option value="launch">Launch</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">Day:</label>
                            <select id="dayFilter" class="calendar-select">
                                <option value="all">All Days</option>
                                <option value="2025-08-21">Tuesday 21st</option>
                                <option value="2025-08-22">Wednesday 22nd</option>
                                <option value="2025-08-23">Thursday 23rd</option>
                                <option value="2025-08-24">Friday 24th</option>
                                <option value="2025-08-25">Saturday 25th</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="calendar-actions">
                        <button id="selectAllBtn" class="btn-secondary">‚úì Select All</button>
                        <button id="exportSelectedBtn" class="btn-primary" disabled>
                            üì§ Export Selected (<span id="selectedCount">0</span>)
                        </button>
                    </div>
                </div>

                <!-- List View -->
                <div id="listViewContainer" class="calendar-list-view">
                    <div id="eventsList" class="events-calendar-list">
                        <div class="loading-state">
                            <div class="loading-spinner-large"></div>
                            <p>Loading calendar events...</p>
                        </div>
                    </div>
                </div>

                <!-- Calendar Grid View -->
                <div id="calendarViewContainer" class="calendar-grid-view hidden">
                    <div class="calendar-header">
                        <button id="prevWeek" class="calendar-nav-btn">‚Äπ</button>
                        <h3 id="currentWeek">Gamescom 2025 Week</h3>
                        <button id="nextWeek" class="calendar-nav-btn">‚Ä∫</button>
                    </div>
                    <div id="calendarGrid" class="calendar-grid">
                        <!-- Calendar grid will be populated by JavaScript -->
                    </div>
                </div>

                <!-- Timeline View -->
                <div id="timelineViewContainer" class="timeline-view hidden">
                    <div id="timeline" class="event-timeline">
                        <!-- Timeline will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Sync Status -->
        <section class="sync-status-section">
            <div class="sync-container">
                <div class="sync-header">
                    <h3>üîÑ Sync Status</h3>
                    <button id="refreshSyncBtn" class="btn-secondary">Refresh</button>
                </div>
                <div class="sync-stats">
                    <div class="sync-stat">
                        <span class="sync-number" id="totalAvailable">58</span>
                        <span class="sync-label">Available</span>
                    </div>
                    <div class="sync-stat">
                        <span class="sync-number" id="totalSelected">0</span>
                        <span class="sync-label">Selected</span>
                    </div>
                    <div class="sync-stat">
                        <span class="sync-number" id="lastExportCount">0</span>
                        <span class="sync-label">Last Export</span>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Custom Export Modal -->
    <div id="customExportModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Custom Calendar Export</h2>
                <button id="closeExportModal" class="modal-close" aria-label="Close modal">&times;</button>
            </div>
            
            <div class="export-form-container">
                <div class="export-section">
                    <h3 class="export-section-title">Export Options</h3>
                    
                    <div class="export-option">
                        <label class="export-label">
                            <input type="radio" name="exportType" value="selected" checked>
                            Selected Events Only (<span id="modalSelectedCount">0</span> events)
                        </label>
                    </div>
                    
                    <div class="export-option">
                        <label class="export-label">
                            <input type="radio" name="exportType" value="filtered">
                            All Filtered Events (<span id="modalFilteredCount">0</span> events)
                        </label>
                    </div>
                    
                    <div class="export-option">
                        <label class="export-label">
                            <input type="radio" name="exportType" value="all">
                            All Available Events (<span id="modalTotalCount">58</span> events)
                        </label>
                    </div>
                </div>
                
                <div class="export-section">
                    <h3 class="export-section-title">Format & Settings</h3>
                    
                    <div class="form-field">
                        <label class="form-label">Export Format</label>
                        <select id="exportFormat" class="form-select">
                            <option value="ics">üìÖ iCalendar (.ics) - Universal</option>
                            <option value="google">üîó Google Calendar Link</option>
                            <option value="outlook">üíº Outlook Web Link</option>
                            <option value="json">üìã JSON Data Export</option>
                        </select>
                    </div>
                    
                    <div class="form-field">
                        <label class="form-label">Calendar Name</label>
                        <input type="text" id="calendarName" class="form-input" value="Gamescom 2025 Events" placeholder="Enter calendar name">
                    </div>
                    
                    <div class="export-options">
                        <label class="export-checkbox">
                            <input type="checkbox" id="includeReminders" checked>
                            Include 30-minute reminders
                        </label>
                        <label class="export-checkbox">
                            <input type="checkbox" id="includeLocation" checked>
                            Include venue locations
                        </label>
                        <label class="export-checkbox">
                            <input type="checkbox" id="includeDescription" checked>
                            Include event descriptions
                        </label>
                        <label class="export-checkbox">
                            <input type="checkbox" id="includeHost" checked>
                            Include host information
                        </label>
                    </div>
                </div>
                
                <div class="export-actions">
                    <button id="cancelExport" class="btn-secondary">Cancel</button>
                    <button id="performExport" class="btn-primary">üì§ Export Calendar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Export Success Modal -->
    <div id="exportSuccessModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">‚úÖ Export Successful!</h2>
                <button id="closeSuccessModal" class="modal-close">&times;</button>
            </div>
            
            <div class="success-panel">
                <div class="success-icon">üìÖ</div>
                <h3 class="success-title">Calendar Exported Successfully!</h3>
                <p class="success-message" id="successMessage">
                    Your selected events have been exported and are ready for import.
                </p>
                <div class="success-actions">
                    <button id="downloadFile" class="btn-primary hidden">üì• Download File</button>
                    <button id="openCalendarLink" class="btn-secondary hidden">üîó Open in Calendar</button>
                    <button id="shareExport" class="btn-secondary">üì§ Share Export</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script>
        window.CONFIG = { 
            apiBase: 'https://us-central1-conference-party-app.cloudfunctions.net',
            // Maps API key removed - loaded in HTML script tag
            version: '2.0.0',
            calendarSync: {
                enabled: true,
                formats: ['ics', 'google', 'outlook', 'json'],
                defaultReminder: 30
            }
        };
    </script>
    <script src="/js/api.js"></script>
    <script src="/js/calendar.js"></script>
    <script src="/js/pwa-init.js"></script>
</body>
</html>